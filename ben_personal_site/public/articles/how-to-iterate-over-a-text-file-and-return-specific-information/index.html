<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ben McLaren</title>
  
  
  <link rel="stylesheet" href="/css/main.min.css">
  <link href="https://fonts.googleapis.com/css?family=Rubik:400,500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="blogo1.ico" type="image/x-icon">
  <meta property="og:image" content="https://res.cloudinary.com/dy35n8sog/image/upload/v1578389845/Screenshot_2020-01-07_at_09.36.47_ehi2dt.png">
  <link rel="shortcut icon" href="https://res.cloudinary.com/dy35n8sog/image/upload/v1578391731/blogo1_guumr5.ico" type="image/x-icon">
</head>
<body>


<div class="offscreen-nav">
  <div class="nav-text">
    <a href="/work/" class="nav-item">Work</a>
    <a href="#" class="nav-item">Articles</a>
    <a href="#" class="nav-item">Contact</a>
  </div>
</div>


<div class="home-container">
    <header class="navbar">
    <div class="logo-wrapper">
      <div class="logo">
        <a href="#">@bybenmclaren</a>
      </div>
      <div class="main-yellow-spot">
      </div>
    </div>
    <svg class="ham hamRotate180 ham5" viewBox="0 0 100 100" width="80" onclick="this.classList.toggle('active')">
      <path
            class="line top"
            d="m 30,33 h 40 c 0,0 8.5,-0.68551 8.5,10.375 0,8.292653 -6.122707,9.002293 -8.5,6.625 l -11.071429,-11.071429" />
      <path
            class="line middle"
            d="m 70,50 h -40" />
      <path
            class="line bottom"
            d="m 30,67 h 40 c 0,0 8.5,0.68551 8.5,-10.375 0,-8.292653 -6.122707,-9.002293 -8.5,-6.625 l -11.071429,11.071429" />
    </svg>
  </header>



  


<article class="page">
  <div class="page-content">
    <p class="page-title"> How to iterate over a text file and return specific information </p>
  <p><strong>Notes on the Le Wagon Regular Expressions Word Frequency exercise</strong></p>
<p>For this challenge we are going to be working with text files and building a text analyzer using Hash.</p>
<p>We want to implement a <code>most_common_words</code> method that returns the number of occurrences of most frequent words in a text file.</p>
<p>To begin with we need to write a method to load our <code>stop_words</code> file. This is a file which contains all the words that you do noy want to be included. There is no set list of stop words but they are often very common words such as “a”, “the”, “is” etc.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">load_stop_words</span>(stop_words_filename)
  <span style="color:#66d9ef">File</span><span style="color:#f92672">.</span>open(stop_words_filename, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>reduce(<span style="color:#f92672">[</span><span style="color:#f92672">]</span>) <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>stop_words, line<span style="color:#f92672">|</span>
    stop_words <span style="color:#f92672">&lt;&lt;</span> line<span style="color:#f92672">.</span>chomp
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><ol>
<li>
<p>To begin with we define our method which takes one parameter which is <code>stop_words_filename</code>, the name of the file we want to read through.</p>
</li>
<li>
<p>Next, we can use <code>File.open(stop_words_filename, &quot;r&quot;)</code>. This is going to simply allow the method to read this file and access the data inside. <code>&quot;r&quot;</code> stands for &lsquo;read&rsquo;. We also call <code>.reduce</code> on this, passing it an <code>[]</code> as an argument. It then takes two parameters of <code>stop_words, line</code>. Lets go ove how this works as it can be confusing.</p>
</li>
</ol>
<ul>
<li><code>.reduce</code> requires an inital value and will take two arguments in the block. The <code>[]</code> in <code>.reduce([])</code> sets the initial value. If we do not set a value, it defaults to zero. After that, we have two parameters in the method <code>|stop_words, line|</code>. The first parameter, which we call <code>stop_words</code> is the total that will eventually be returned. The second parameter, which we call <code>line</code> is the current number as we iterate through the document line by line. In other words <code>stop_words</code> is representing our empty array and <code>line</code> is each line in the file that its iterating over.</li>
</ul>
<ol start="3">
<li>This block then simply adds each line to the array with <code>.chomp</code> cutting off unnecessary characters such as white space and line breaks.</li>
</ol>
<p>Now, we can write our method to analyize our text.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">most_common_words</span>(filename, stop_words_filename, number_of_word)
  counter <span style="color:#f92672">=</span> <span style="color:#66d9ef">Hash</span><span style="color:#f92672">.</span>new(<span style="color:#ae81ff">0</span><span style="color:#f92672"></span>)

  stop_words <span style="color:#f92672">=</span> load_stop_words(stop_words_filename)

  <span style="color:#66d9ef">File</span><span style="color:#f92672">.</span>open(filename, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>each_line <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>line<span style="color:#f92672">|</span>
    line<span style="color:#f92672">.</span>chomp<span style="color:#f92672">.</span>downcase<span style="color:#f92672">.</span>split(<span style="color:#e6db74">/</span><span style="color:#e6db74">\</span><span style="color:#e6db74">W+</span><span style="color:#e6db74">/</span>)<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>word<span style="color:#f92672">|</span>
      counter<span style="color:#f92672">[</span>word<span style="color:#f92672">]</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672"></span><span style="color:#66d9ef">unless</span> stop_words<span style="color:#f92672">.</span>include? word
    <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">end</span>

  <span style="color:#66d9ef">Hash</span><span style="color:#f92672">[</span>counter<span style="color:#f92672">.</span>sort_by { <span style="color:#f92672">|</span>_, v<span style="color:#f92672">|</span> v }<span style="color:#f92672">.</span>reverse<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672"></span><span style="color:#f92672">..</span>(number_of_word <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672"></span>)<span style="color:#f92672">]</span><span style="color:#f92672">]</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><ol>
<li>
<p>We begin with defining our method with three arguments. <code>filename, stop_words_filename, number_of_word</code>.</p>
</li>
<li>
<p>We set a variable of <code>counter</code>. This is equal to creating a new hash with <code>Hash.new</code>. The default value of any key in this hash is set to <code>0</code>.</p>
</li>
<li>
<p>Next, we create a new variable of <code>stop_words</code> and this is equal to calling our <code>load_stop_words</code> method with its required argument of <code>stop_words_filename</code>.</p>
</li>
<li>
<p>Now we can open our file which is passed in by the user and iterate over it with <code>.each_line</code>. This will simply iterate over each individual line in the file.</p>
</li>
<li>
<p>Then we say for each line lets remove any whitespace with <code>.chomp</code>, change the words on the line to lowercase with <code>.downcase</code> and then split the line on any non word character with <code>.split(/\W+/)</code>. Finally we iterate over this using <code>.each</code>.</p>
</li>
<li>
<p>Here, we say make a new key of <code>word</code> inside our hash called <code>counter</code>. This means a new key will be created inside hash for each new word it finds. Then we add 1 to this key unless the word is contained within the <code>stop_words</code> file.</p>
</li>
<li>
<p>Lastly, we can use the notation <code>Hash[]</code> which will generate a new hash. Only if it has an array of arrays as an argument. We then call <code>.sort_by</code> on <code>counter</code>. This takes two arguments but we only need the second argument. The <code>_</code> says that we don&rsquo;t care what this is is. Then we say for each element reverse the order from 0 to the last position.</p>
</li>
</ol>

</article>

</div>


    <div class="footer">
    <div class="icon-container">
      <a href="#">
        <svg width="25" height="25" viewBox="0 0 60 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.5501 47.08C10.1801 47.08 4.18012 45.5 1.01011 43.84C0.834721 43.7296 0.69795 43.5675 0.618712 43.376C0.539474 43.1845 0.521684 42.9731 0.567801 42.7711C0.613918 42.5691 0.721664 42.3863 0.876143 42.2482C1.03062 42.1101 1.2242 42.0233 1.43012 42C6.97584 41.6854 12.3871 40.1705 17.2901 37.56C12.8801 36.37 8.39011 33.22 7.50011 29.15C7.46275 28.9794 7.47072 28.802 7.52323 28.6354C7.57574 28.4688 7.67096 28.3189 7.7994 28.2006C7.92785 28.0823 8.08505 27.9996 8.25536 27.9609C8.42567 27.9222 8.60314 27.9288 8.77012 27.98C9.18197 28.0815 9.6065 28.1219 10.0301 28.1C7.85084 26.7573 6.03341 24.9016 4.73652 22.6948C3.43962 20.488 2.70271 17.9972 2.59012 15.44C2.58068 15.2392 2.632 15.0401 2.73739 14.8689C2.84277 14.6977 2.99733 14.5622 3.18088 14.4801C3.36444 14.3981 3.56846 14.3733 3.76634 14.4089C3.96421 14.4446 4.14675 14.539 4.29011 14.68V14.68C4.77011 15.08 5.26678 15.4567 5.78012 15.81C4.81786 13.8034 4.26888 11.6239 4.1658 9.40094C4.06273 7.17798 4.40767 4.95699 5.18011 2.87C5.24375 2.70981 5.34771 2.56879 5.4819 2.46062C5.6161 2.35245 5.77598 2.2808 5.94602 2.25262C6.11607 2.22445 6.29051 2.24071 6.45242 2.29982C6.61434 2.35893 6.75822 2.45889 6.87011 2.59C14.0001 10.9 24.0801 14.7 29.2001 14.53C29.0666 13.8043 28.9996 13.0679 29.0001 12.33C29.0054 9.05977 30.3075 5.92515 32.6209 3.61369C34.9342 1.30222 38.0699 0.00264367 41.3401 0C44.6206 0.0839037 47.7728 1.29116 50.2701 3.42C50.9463 3.26506 51.6139 3.0748 52.2701 2.85C53.5586 2.42066 54.8068 1.87856 56.0001 1.23C56.1953 1.12318 56.4205 1.08449 56.6401 1.12005C56.8597 1.15561 57.0612 1.26339 57.2127 1.42634C57.3642 1.58929 57.457 1.7981 57.4764 2.01973C57.4959 2.24136 57.4409 2.46315 57.3201 2.65C56.1727 4.30627 54.9024 5.87401 53.5201 7.34C55.0806 6.99227 56.617 6.54468 58.1201 6C58.3221 5.90983 58.5483 5.88917 58.7632 5.94125C58.9782 5.99332 59.1698 6.1152 59.3081 6.28781C59.4464 6.46041 59.5236 6.67401 59.5276 6.89516C59.5316 7.11631 59.4621 7.33253 59.3301 7.51C57.9257 9.38989 56.2742 11.0717 54.4201 12.51C54.2701 17.26 50.5701 38.77 32.9401 44.79H32.8301C27.8776 46.3026 22.7285 47.0743 17.5501 47.08V47.08ZM5.67011 43.51C14.4357 45.7834 23.6618 45.5653 32.3101 42.88V42.88C49.3101 37 52.5501 15 52.4201 12C52.4121 11.8364 52.4443 11.6733 52.5141 11.5251C52.5838 11.3769 52.6889 11.2481 52.8201 11.15C53.726 10.4943 54.5848 9.77589 55.3901 9C53.8401 9.44 52.2801 9.74 51.8701 9.33C51.7684 9.22797 51.69 9.10517 51.6401 8.97C51.4989 8.60036 51.3353 8.23969 51.1501 7.89C51.0408 7.67634 51.0119 7.43049 51.0689 7.19733C51.1258 6.96417 51.2646 6.75926 51.4601 6.62C52.1246 5.99615 52.746 5.32795 53.3201 4.62L52.9001 4.76C51.9941 5.07268 51.0688 5.32654 50.1301 5.52C49.9474 5.56117 49.7568 5.5502 49.58 5.48832C49.4032 5.42644 49.2473 5.31614 49.1301 5.17C47.9301 3.67 44.3301 2 41.3401 2C39.7423 1.99597 38.1655 2.36335 36.734 3.07314C35.3025 3.78294 34.0556 4.81572 33.0917 6.08998C32.1278 7.36424 31.4732 8.8451 31.1796 10.4157C30.886 11.9863 30.9615 13.6036 31.4001 15.14C31.4387 15.2749 31.4484 15.4163 31.4287 15.5552C31.409 15.694 31.3604 15.8272 31.2859 15.946C31.2114 16.0648 31.1127 16.1667 30.9963 16.2449C30.8799 16.3231 30.7483 16.3759 30.6101 16.4C25.6101 17.28 14.7101 13.85 6.54011 5.22C5.30011 10.22 7.19012 15.91 10.0101 18.22C10.1775 18.3757 10.2865 18.5841 10.3189 18.8104C10.3514 19.0367 10.3053 19.2673 10.1883 19.4637C10.0714 19.6602 9.89069 19.8106 9.6763 19.89C9.46191 19.9694 9.22679 19.9729 9.01012 19.9C7.5844 19.2602 6.21893 18.4938 4.93011 17.61C5.86011 21.94 8.93012 25.54 13.5901 27.69C13.7703 27.7739 13.9215 27.9095 14.0242 28.0797C14.127 28.2498 14.1767 28.4467 14.1671 28.6453C14.1574 28.8438 14.0888 29.035 13.97 29.1943C13.8512 29.3537 13.6876 29.474 13.5001 29.54C12.3683 29.8643 11.1975 30.0326 10.0201 30.04C11.6501 33.14 16.1701 35.56 19.8901 35.95C20.0782 35.9688 20.2572 36.0405 20.4062 36.1568C20.5552 36.2732 20.6682 36.4294 20.7321 36.6073C20.7959 36.7853 20.808 36.9777 20.767 37.1622C20.7259 37.3468 20.6334 37.5159 20.5001 37.65C18.3201 39.83 12.0001 42.45 5.67011 43.51Z" fill="black"/>
        </svg>
      </a>

      <a href="#">
        <svg enable-background="new 0 0 48 48" height="25px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Expanded"><g><g><path d="M44,40H4c-2.206,0-4-1.794-4-4V12c0-2.206,1.794-4,4-4h40c2.206,0,4,1.794,4,4v24C48,38.206,46.206,40,44,40z M4,10     c-1.103,0-2,0.897-2,2v24c0,1.103,0.897,2,2,2h40c1.103,0,2-0.897,2-2V12c0-1.103-0.897-2-2-2H4z"/></g><g><path d="M24,29.191L6.457,17.84c-0.464-0.301-0.597-0.919-0.297-1.383s0.919-0.596,1.383-0.297L24,26.809L40.457,16.16     c0.464-0.299,1.083-0.167,1.383,0.297s0.167,1.082-0.297,1.383L24,29.191z"/></g><g><path d="M6.001,34c-0.323,0-0.641-0.156-0.833-0.445c-0.307-0.46-0.183-1.08,0.277-1.387l9-6c0.46-0.307,1.081-0.183,1.387,0.277     c0.307,0.46,0.183,1.08-0.277,1.387l-9,6C6.384,33.945,6.191,34,6.001,34z"/></g><g><path d="M41.999,34c-0.19,0-0.383-0.055-0.554-0.168l-9-6c-0.46-0.307-0.584-0.927-0.277-1.387     c0.306-0.46,0.926-0.584,1.387-0.277l9,6c0.46,0.307,0.584,0.927,0.277,1.387C42.64,33.844,42.322,34,41.999,34z"/></g></g></g></svg>
      </a>

      <a href="#">
        <svg enable-background="new 0 0 24 24" height="25px" id="Layer_1" version="1.1" viewBox="0 0 24 24" width="24px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M12,1c6.064,0,11,4.936,11,11s-4.936,11-11,11C5.935,23,1,18.064,1,12S5.935,1,12,1 M12,0C5.373,0,0,5.373,0,12   s5.373,12,12,12s12-5.373,12-12S18.627,0,12,0L12,0z"/><path d="M17,22.5c-0.262,0-0.482-0.204-0.499-0.469C16.044,14.718,12.563,7.145,7.188,1.77c-0.195-0.194-0.195-0.513,0-0.707   s0.512-0.194,0.707,0c5.542,5.543,9.132,13.355,9.604,20.904c0.017,0.275-0.192,0.514-0.468,0.53C17.021,22.5,17.01,22.5,17,22.5z"/><path d="M1,11.063c-0.276,0-0.5-0.224-0.5-0.5c0-0.274,0.224-0.5,0.5-0.5c6.742,0,15.438-1.097,18.57-6.317   c0.143-0.237,0.451-0.315,0.687-0.173c0.237,0.143,0.313,0.448,0.171,0.687C17.055,9.882,8,11.063,1,11.063z"/><path d="M4.687,21.042c-0.084,0-0.169-0.021-0.248-0.065c-0.24-0.138-0.323-0.441-0.186-0.683   c4.227-7.397,12.931-9.756,18.905-7.769c0.262,0.088,0.402,0.371,0.316,0.633c-0.088,0.262-0.369,0.404-0.633,0.314   c-5.589-1.861-13.747,0.364-17.72,7.315C5.029,20.951,4.861,21.042,4.687,21.042z"/></g></svg>
      </a>

      <a href="#">
        <svg enable-background="new 0 0 512 512" height="25px" id="Layer_1" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M256.6,507.8C118.1,507.3,7.3,393.8,8.5,254.7C9.6,118.1,119.9,4.6,260.2,6.3   C397.3,7.9,507.1,121.1,505.5,260C504,396,394.7,507.7,256.6,507.8z M221.2,377.5c-1.6-0.3-2.3-0.4-3.1-0.5   c-19.1-2.7-37-8.4-53-19.8c-17.1-12.2-27.6-28.6-31.9-48.7c-4.4-20.5-2.7-41.2,0.5-61.7c2.2-14.1,7-27.4,18-37.5   c1.6-1.5,1.5-2.7,0.7-4.7c-6-16.6-5.3-33.3-0.3-50c1-3.3,2.6-4.7,6.1-3.4c4.2,1.5,8.5,2.8,12.4,5.1c10.7,6.3,18.9,15,26.1,24.9   c1.8,2.4,3,2.8,5.5,1.1c6.2-4.3,13.5-5.6,20.6-6.9c17.2-3.2,34.5-2.6,51.8-1.8c10.1,0.5,20.1,2.3,29.7,5.9c3,1.1,5.7,5,8.5,3.5   c2.8-1.4,4.5-5.2,6.7-7.8c8.8-10.6,18.9-19.4,32.5-23.7c4.4-1.4,6.4-0.7,7.9,4c5,16.3,5.7,32.4-0.6,48.4c-1,2.5-0.8,4.3,1.3,6.2   c8.3,7.7,13.1,17.6,15.6,28.5c4.3,18.6,5.4,37.6,4.2,56.6c-1.2,18.2-7.1,34.8-19.3,48.8c-16.4,18.8-37.8,28.1-61.9,32.2   c-2.8,0.5-5.7,1-8.7,1.5c7.1,11.1,10.5,22.6,10.6,35c0.1,14.3,0,28.7,0,43c0,9.3,0,18.6,0,28c15.2-1.5,43.6-11.6,63.4-22.4   c92.3-50.3,138.9-154.2,115.4-257.1C452.1,81.8,331,4.5,208.6,31C93,56.1,13,167.5,30.4,289.9c8.1,56.9,34.2,104.5,77.4,142.4   c28.5,25,61.5,41.7,98.5,50.3c2.9,0.7,4.2,0.5,4.1-3c-0.2-9.8-0.2-19.7,0-29.5c0-3.3-0.6-4.3-4.2-3.6c-6.5,1.3-13.2,2-19.9,1.6   c-21.2-1.1-38.4-9.5-50.5-27.5c-4.1-6.1-6.4-13.2-10.3-19.3c-6.9-10.7-13-22-24.5-28.9c-1.5-0.9-3.3-2.3-2.4-4.4   c0.8-2,3-1.7,4.8-1.9c12.8-1,23.3,3.8,32,13c4.6,4.9,7.5,11,11.5,16.3c13.3,17.7,38.7,25.3,59.5,17.8c3-1.1,3.9-2.6,4.3-5.7   C211.9,397,213.9,386.7,221.2,377.5z" fill="#120606"/></g></svg>
      </a>
    </div>
    <p>made by Ben McLaren :)</p>
  </div>





</body>
</html>

</div>





<script src="/app.min.6078194e38f3e3de6dfd2ece17ba4c06ed85bebf111e9c1c16c70f1c432dfd57.js" integrity="sha256-YHgZTjjz495t/S7OF7pMBu2Fvr8RHpwcFscPHEMt/Vc=" media="screen" crossorigin="anonymous">
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/cloudinary-core/2.3.0/cloudinary-core-shrinkwrap.min.js">
</script>
<script>
  const cl = cloudinary.Cloudinary.new({
    cloud_name: 'dy35n8sog'
  });

  cl.responsive()
</script>
